<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capaian Pembelajaran Fase C</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
        }
        
        #sidebar {
            width: 250px;
            background-color: #f1f1f1;
            height: 100vh;
            padding: 20px;
            overflow-y: auto;
        }
        
        #content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            text-align: left;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .sidebar-button:hover {
            background-color: #45a049;
        }
        
        iframe {
            flex: 1;
            width: 100%;
            border: none;
            min-height: 500px;
        }
        
        .show-table-button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background-color: #008CBA;
            color: white;
            border: none;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .show-table-button:hover {
            background-color: #007B9A;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        th {
            background-color: #f2f2f2;
        }
        
        .buat-tp-atp-button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            text-decoration: none;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .buat-tp-atp-button:hover {
            background-color: #45a049;
        }
        
        #homeButton {
            background-color: #f44336;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            margin-bottom: 20px;
            width: 100%;
            text-align: center;
            font-size: 16px;
        }
        
        #homeButton:hover {
            background-color: #d32f2f;
        }
    </style>
</head>

<body>
    <div id="sidebar">
        <button id="homeButton" onclick="window.location.href='home.html'">Home</button>
        <h2>Capaian Pembelajaran Fase C</h2>
        <button class="sidebar-button" onclick="loadContent('https://docs.google.com/document/d/10dvgoJxkMBdLUIT0bhPkoKQaTlt19tYNN01VTTD7D8Y/edit?usp=sharing')">CP Matematika Fase C</button>
        <button class="sidebar-button" onclick="loadContent('https://docs.google.com/document/d/14j8OguFr6agFV0l2aVPQ1h4-jlveSIaHuSjnZfWOQjI/edit?usp=sharing')">CP Pendidikan Bahasa Inggris Fase C</button>
        <button class="sidebar-button" onclick="loadContent('https://docs.google.com/document/d/17K20rcs1hBIL8hPG1bdajepqOFll9aWm8Rdb-swXncg/edit?usp=sharing')">CP PJOK Fase C</button>
        <button class="sidebar-button" onclick="loadContent('https://docs.google.com/document/d/17bjtPJMYHp8pajWsnnJF-ShQGYmWfbfFXUkUsFawsZY/edit?usp=sharing')">CP Seni rupa Fase C</button>
        <button class="sidebar-button" onclick="loadContent('https://docs.google.com/document/d/1AHZ1J1asH2ezzU4yypyNTpK8AUwqBdp7-KlBSYrKClg/edit?usp=sharing')">CP PAIPBP Fase C</button>
        <button class="sidebar-button" onclick="loadContent('https://docs.google.com/document/d/1R50SauU-YS7WoJPiVeKznJo8Ps5EYsRzupXD8tptBRQ/edit?usp=sharing')">CP Indonesia Fase C</button>
        <button class="sidebar-button" onclick="loadContent('https://docs.google.com/document/d/1eLIZOqO0iaqxkmHdXAjigTziqoQeUbeSsorMa1MhhWE/edit?usp=sharing')">CP Bahasa IPAS Fase C</button>
        <button class="sidebar-button" onclick="loadContent('https://docs.google.com/document/d/1jpiK9QHPtOpULCORPZ1dR4xm0s4A69x_msWtU-eOqVU/edit?usp=sharing')">CP Bahasa Pendidikan Pancasila Fase C</button>
    </div>
    <div id="content">
        <iframe id="document-frame" src=""></iframe>
        <button class="show-table-button" onclick="showTujuanPembelajaran()">Tampilkan Tujuan dan Alur Pembelajaran</button>
        <a href="https://miftahsidik99.github.io/ai-tp/" target="_blank" class="buat-tp-atp-button">Buat TP Dan ATP</a>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Tujuan dan Alur Pembelajaran</h2>
            <table id="tujuanTable">
                <!-- Tabel akan diisi secara dinamis -->
            </table>
        </div>
    </div>

    <script>
        let currentDocId = '';
        const docData = {
            '10dvgoJxkMBdLUIT0bhPkoKQaTlt19tYNN01VTTD7D8Y': {
                mataPelajaran: 'Seni Rupa',
                elemen: ['Mengalami', 'Menciptakan', 'Merefleksikan', 'Berpikir dan Bekerja Artistik'],
                capaian: [
                    'Peserta didik mampu mengeksplorasi berbagai medium seni rupa dan mengembangkan keterampilan dalam penggunaan alat dan bahan.',
                    'Peserta didik mampu menciptakan karya seni rupa dua dimensi dan tiga dimensi dengan berbagai tema.',
                    'Peserta didik mampu merefleksikan proses dan hasil karya seni rupa, serta mengapresiasi karya seni rupa orang lain.',
                    'Peserta didik mampu mengembangkan ide kreatif dan menerapkan prinsip-prinsip seni rupa dalam berkarya.'
                ]
            },
            // Tambahkan data untuk dokumen lainnya di sini
        };

        function loadContent(url) {
            document.getElementById('document-frame').src = url;
            currentDocId = extractDocId(url);
        }

        function extractDocId(url) {
            const match = url.match(/\/d\/(.*?)\//);
            return match ? match[1] : null;
        }

        function showTujuanPembelajaran() {
            if (!currentDocId) {
                alert('Silakan pilih dokumen terlebih dahulu.');
                return;
            }

            simulateExtractAndGenerate(currentDocId)
                .then(data => {
                    displayTujuanPembelajaran(data);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Terjadi kesalahan: ' + error.message);
                });
        }

        function simulateExtractAndGenerate(docId) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    const data = docData[docId];
                    if (!data) {
                        reject(new Error('Data tidak ditemukan untuk dokumen ini.'));
                        return;
                    }
                    const generatedData = generateTujuanDanAlur(data);
                    resolve(generatedData);
                }, 1000);
            });
        }

        function generateTujuanDanAlur(data) {
            const tujuanDanAlur = [];

            data.elemen.forEach((elemen, index) => {
                const capaian = data.capaian[index];
                tujuanDanAlur.push(generateSpecificTujuanDanAlur(data.mataPelajaran, elemen, capaian));
            });

            return tujuanDanAlur;
        }

        function generateSpecificTujuanDanAlur(mataPelajaran, elemen, capaian) {
            let tujuan, alur;

            switch (mataPelajaran) {
                case 'Seni Rupa':
                    switch (elemen) {
                        case 'Mengalami':
                            tujuan = `Siswa dapat mengeksplorasi dan mengembangkan keterampilan dalam penggunaan berbagai medium seni rupa`;
                            alur = `1. Pengenalan berbagai medium seni rupa\n2. Eksplorasi alat dan bahan seni rupa\n3. Praktik penggunaan berbagai teknik seni rupa\n4. Eksperimen dengan kombinasi medium\n5. Evaluasi dan refleksi pengalaman berkarya`;
                            break;
                        case 'Menciptakan':
                            tujuan = `Siswa dapat menciptakan karya seni rupa dua dimensi dan tiga dimensi dengan berbagai tema`;
                            alur = `1. Brainstorming ide dan tema\n2. Sketsa dan perencanaan karya\n3. Pembuatan karya 2D (misalnya lukisan, gambar)\n4. Pembuatan karya 3D (misalnya patung, instalasi)\n5. Presentasi dan pameran karya`;
                            break;
                        case 'Merefleksikan':
                            tujuan = `Siswa dapat merefleksikan proses dan hasil karya seni rupa, serta mengapresiasi karya seni rupa orang lain`;
                            alur = `1. Diskusi tentang proses berkarya\n2. Analisis hasil karya sendiri\n3. Apresiasi karya seni rupa orang lain\n4. Penulisan refleksi atau kritik seni\n5. Sharing dan diskusi kelompok tentang karya seni`;
                            break;
                        case 'Berpikir dan Bekerja Artistik':
                            tujuan = `Siswa dapat mengembangkan ide kreatif dan menerapkan prinsip-prinsip seni rupa dalam berkarya`;
                            alur = `1. Pengenalan prinsip-prinsip dasar seni rupa\n2. Latihan pengembangan ide kreatif\n3. Penerapan prinsip seni rupa dalam sketsa\n4. Eksperimen dengan berbagai gaya dan aliran seni\n5. Proyek seni rupa yang menggabungkan semua elemen`;
                            break;
                    }
                    break;
                    // Tambahkan case untuk mata pelajaran lainnya
            }

            return {
                tujuan,
                alur
            };
        }

        function displayTujuanPembelajaran(data) {
            var modal = document.getElementById("myModal");
            var span = document.getElementsByClassName("close")[0];
            var table = document.getElementById("tujuanTable");

            // Bersihkan tabel
            table.innerHTML = "";

            // Buat header tabel
            var headerRow = table.insertRow(0);
            var cell1 = headerRow.insertCell(0);
            var cell2 = headerRow.insertCell(1);
            cell1.innerHTML = "<b>Tujuan Pembelajaran</b>";
            cell2.innerHTML = "<b>Alur Tujuan Pembelajaran</b>";

            // Isi tabel dengan data
            data.forEach(item => {
                var row = table.insertRow(-1);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                cell1.innerHTML = item.tujuan;
                cell2.innerHTML = item.alur.replace(/\n/g, '<br>');
            });

            // Tampilkan modal
            modal.style.display = "block";

            // Tutup modal saat mengklik tombol close
            span.onclick = function() {
                modal.style.display = "none";
            }

            // Tutup modal saat mengklik di luar modal
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

        // Sembunyikan tombol saat halaman pertama kali dimuat
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('.show-table-button').style.display = 'none';
        });
    </script>
</body>

</html>